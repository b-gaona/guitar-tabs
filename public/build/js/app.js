const undoArray=[],redoArray=[];function updateDataInfo(){putDataTabs(),putDataColumns(),putDataStrings()}function putDataTabs(){const a=document.querySelectorAll(".tabs");let e=1;a.forEach(a=>{a.setAttribute("data-tab",e),e++})}function putDataColumns(){const a=document.querySelectorAll(".tabs__column");let e=1;a.forEach(a=>{a.setAttribute("data-col",e),e++})}function putDataStrings(){const a=document.querySelectorAll(".tabs__column .tabs__cell");let e=1;a.forEach(a=>{a.setAttribute("data-string",e),e++,7==e&&(e=1)})}function addTab(){deleteActiveCell();const a=document.querySelector(".content__tabs"),e=document.createElement("div");e.classList.add("tabs"),e.innerHTML='\n  <div class="tabs__column">\n    <span class="tabs__cell">E</span>\n    <span class="tabs__cell">B</span>\n    <span class="tabs__cell">G</span>\n    <span class="tabs__cell">D</span>\n    <span class="tabs__cell">A</span>\n    <span class="tabs__cell">E</span>\n  </div>\n  <div class="tabs__column">\n    <span class="tabs__cell">|</span>\n    <span class="tabs__cell">|</span>\n    <span class="tabs__cell">|</span>\n    <span class="tabs__cell">|</span>\n    <span class="tabs__cell">|</span>\n    <span class="tabs__cell">|</span>\n  </div>\n  <div class="tabs__column">\n    <span class="tabs__cell tabs__cell-active">-</span>\n    <span class="tabs__cell">-</span>\n    <span class="tabs__cell">-</span>\n    <span class="tabs__cell">-</span>\n    <span class="tabs__cell">-</span>\n    <span class="tabs__cell">-</span>\n  </div>\n  ',a.appendChild(e)}function deleteTab(){document.querySelector(".content__tabs").lastChild.remove()}function saveCommand(a,e,n=!0){undoArray.push({action:{fn:a},inverse:{revFn:e}}),n&&(redoArray.length=0)}function undo(){const a=undoArray.pop();if(a){const e=a.inverse.revFn;"move"!==e()&&addActiveCell(a.action.index),redoArray.push({action:{fn:e},inverse:{revFn:a.action.fn}})}}function redo(){const a=redoArray.pop(),{string:e,col:n,tab:t}=getActiveCell();if(a){const s=a.inverse.revFn;saveCommand(s,a.action.fn,!1),undoArray.length>0&&(undoArray[undoArray.length-1].action.index={string:e,col:n,tab:t}),s(),updateDataInfo()}}function addLine(){const{tabElement:a}=getActiveCell();deleteActiveCell();const e=document.createElement("div");e.classList.add("tabs__column"),e.innerHTML='\n    <span class="tabs__cell tabs__cell-active">-</span>\n    <span class="tabs__cell">-</span>\n    <span class="tabs__cell">-</span>\n    <span class="tabs__cell">-</span>\n    <span class="tabs__cell">-</span>\n    <span class="tabs__cell">-</span>\n  ',a.appendChild(e)}function deleteLine(){const{tabElement:a}=getActiveCell();a.lastChild.remove()}function addBlankCol(){const{tabElement:a}=getActiveCell();deleteActiveCell();const e=document.createElement("div"),n=document.createElement("div");e.classList.add("tabs__column"),n.classList.add("tabs__column"),e.innerHTML='\n    <span class="tabs__cell">|</span>\n    <span class="tabs__cell">|</span>\n    <span class="tabs__cell">|</span>\n    <span class="tabs__cell">|</span>\n    <span class="tabs__cell">|</span>\n    <span class="tabs__cell">|</span>\n  ',n.innerHTML='\n    <span class="tabs__cell tabs__cell-active">-</span>\n    <span class="tabs__cell">-</span>\n    <span class="tabs__cell">-</span>\n    <span class="tabs__cell">-</span>\n    <span class="tabs__cell">-</span>\n    <span class="tabs__cell">-</span>\n  ',a.appendChild(e),a.appendChild(n)}function deleteBlankCol(){const{tabElement:a}=getActiveCell();a.lastChild.remove(),a.lastChild.remove()}function deleteActiveCell(){const{cellElement:a,string:e,col:n,tab:t}=getActiveCell();undoArray.length>0&&(undoArray[undoArray.length-1].action.index={string:e,col:n,tab:t}),a.classList.remove("tabs__cell-active")}function addActiveCell({string:a,col:e,tab:n}){document.querySelector(`div[data-tab='${n}']`).querySelector(`div[data-col='${e}']`).querySelector(`span[data-string='${a}']`).classList.add("tabs__cell-active")}function getActiveCell(){const a=document.querySelector(".tabs__cell-active"),e=a.parentElement,n=e.parentElement;return{string:a.dataset.string,col:e.dataset.col,tab:n.dataset.tab,tabElement:n,colElement:e,cellElement:a}}function moveDown(){const{cellElement:a,string:e,col:n,tab:t}=getActiveCell();return"6"!==e&&(undoArray.length>0&&(undoArray[undoArray.length-1].action.index={string:e,col:n,tab:t}),a.classList.remove("tabs__cell-active"),addActiveCell({string:+e+1,col:n,tab:t})),"move"}function moveUp(){const{cellElement:a,string:e,col:n,tab:t}=getActiveCell();return"1"!==e&&(a.classList.remove("tabs__cell-active"),addActiveCell({string:+e-1,col:n,tab:t})),"move"}document.addEventListener("DOMContentLoaded",()=>{putDataTabs(),putDataStrings(),putDataColumns(),document.addEventListener("keydown",a=>{const{string:e}=getActiveCell();switch(a.key){case"t":saveCommand(addTab,deleteTab),addTab(),updateDataInfo();break;case"q":undo();break;case"e":redo();break;case"Enter":saveCommand(addLine,deleteLine),addLine(),updateDataInfo();break;case"l":saveCommand(addBlankCol,deleteBlankCol),addBlankCol(),updateDataInfo();break;case"s":"6"!==e&&(saveCommand(moveDown,moveUp),moveDown());break;case"w":"6"!==e&&(saveCommand(moveUp,moveDown),moveUp())}document.querySelector("#helper").textContent=JSON.stringify(undoArray);document.querySelector("#helper2").textContent=JSON.stringify(redoArray)})});
//# sourceMappingURL=app.js.map
