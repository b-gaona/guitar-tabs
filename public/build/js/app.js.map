{"version":3,"sources":["app.js"],"names":["undoArray","redoArray","flag","updateDataInfo","putDataTabs","putDataColumns","putDataStrings","tabs","document","querySelectorAll","cont","forEach","tab","setAttribute","addTab","deleteActiveCell","section","querySelector","newTab","createElement","classList","add","innerHTML","appendChild","deleteTab","lastChild","remove","saveCommand","fn","revFn","keep","push","action","inverse","length","undo","lastCommand","pop","addActiveCell","index","redo","currCell","col","parentElement","string","dataset","addLine","newCol","deleteLine","addBlankCol","blankCol","deleteBlankCol","console","log","addEventListener","evt","key","textContent","JSON","stringify"],"mappings":"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","file":"app.js","sourcesContent":["const undoArray = [];\r\nconst redoArray = [];\r\nlet flag = true;\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n  putDataTabs();\r\n  putDataStrings();\r\n  putDataColumns();\r\n\r\n  document.addEventListener(\"keydown\", (evt) => {\r\n    switch (evt.key) {\r\n      case \"t\":\r\n        saveCommand(addTab, deleteTab);\r\n        addTab();\r\n        updateDataInfo();\r\n        break;\r\n      case \"q\":\r\n        undo();\r\n        break;\r\n      case \"e\":\r\n        redo();\r\n        break;\r\n      case \"Enter\":\r\n        saveCommand(addLine, deleteLine);\r\n        addLine();\r\n        updateDataInfo();\r\n        break;\r\n      case \"l\":\r\n        saveCommand(addBlankCol, deleteBlankCol);\r\n        addBlankCol();\r\n        updateDataInfo();\r\n        break;\r\n    }\r\n    const id = document.querySelector(\"#helper\");\r\n    id.textContent = JSON.stringify(undoArray);\r\n    const id2 = document.querySelector(\"#helper2\");\r\n    id2.textContent = JSON.stringify(redoArray);\r\n  });\r\n});\r\n\r\nfunction updateDataInfo() {\r\n  putDataTabs();\r\n  putDataColumns();\r\n  putDataStrings();\r\n}\r\n\r\nfunction putDataTabs() {\r\n  const tabs = document.querySelectorAll(\".tabs\");\r\n  let cont = 1;\r\n\r\n  tabs.forEach((tab) => {\r\n    tab.setAttribute(\"data-tab\", cont);\r\n    cont++;\r\n  });\r\n}\r\n\r\nfunction putDataColumns() {\r\n  const tabs = document.querySelectorAll(\".tabs__column\");\r\n  let cont = 1;\r\n\r\n  tabs.forEach((tab) => {\r\n    tab.setAttribute(\"data-col\", cont);\r\n    cont++;\r\n  });\r\n}\r\n\r\nfunction putDataStrings() {\r\n  const tabs = document.querySelectorAll(\".tabs__column .tabs__cell\");\r\n  let cont = 1;\r\n\r\n  tabs.forEach((tab) => {\r\n    tab.setAttribute(\"data-string\", cont);\r\n    cont++;\r\n\r\n    if (cont == 7) {\r\n      cont = 1;\r\n    }\r\n  });\r\n}\r\n\r\nfunction addTab() {\r\n  deleteActiveCell();\r\n\r\n  const section = document.querySelector(\".content__tabs\");\r\n  const newTab = document.createElement(\"div\");\r\n\r\n  newTab.classList.add(\"tabs\");\r\n\r\n  newTab.innerHTML = `\r\n  <div class=\"tabs__column\">\r\n    <span class=\"tabs__cell\">E</span>\r\n    <span class=\"tabs__cell\">B</span>\r\n    <span class=\"tabs__cell\">G</span>\r\n    <span class=\"tabs__cell\">D</span>\r\n    <span class=\"tabs__cell\">A</span>\r\n    <span class=\"tabs__cell\">E</span>\r\n  </div>\r\n  <div class=\"tabs__column\">\r\n    <span class=\"tabs__cell\">|</span>\r\n    <span class=\"tabs__cell\">|</span>\r\n    <span class=\"tabs__cell\">|</span>\r\n    <span class=\"tabs__cell\">|</span>\r\n    <span class=\"tabs__cell\">|</span>\r\n    <span class=\"tabs__cell\">|</span>\r\n  </div>\r\n  <div class=\"tabs__column\">\r\n    <span class=\"tabs__cell tabs__cell-active\">-</span>\r\n    <span class=\"tabs__cell\">-</span>\r\n    <span class=\"tabs__cell\">-</span>\r\n    <span class=\"tabs__cell\">-</span>\r\n    <span class=\"tabs__cell\">-</span>\r\n    <span class=\"tabs__cell\">-</span>\r\n  </div>\r\n  `;\r\n\r\n  section.appendChild(newTab);\r\n}\r\n\r\nfunction deleteTab() {\r\n  const section = document.querySelector(\".content__tabs\");\r\n  const lastChild = section.lastChild;\r\n  lastChild.remove();\r\n}\r\n\r\nfunction saveCommand(fn, revFn, keep = true) {\r\n  undoArray.push({\r\n    action: {\r\n      fn,\r\n    },\r\n    inverse: {\r\n      revFn,\r\n    },\r\n  });\r\n\r\n  //When something it's added the the redo array is restarted. This because we only need the redo after a undo, not after adding something.\r\n  if (keep) {\r\n    redoArray.length = 0;\r\n  }\r\n}\r\n\r\nfunction undo() {\r\n  const lastCommand = undoArray.pop();\r\n\r\n  if (lastCommand) {\r\n    const fn = lastCommand.inverse.revFn;\r\n    fn();\r\n\r\n    addActiveCell(lastCommand.action.index);\r\n\r\n    //We add the undo function to the redo array\r\n    redoArray.push({\r\n      action: {\r\n        fn,\r\n      },\r\n      inverse: {\r\n        revFn: lastCommand.action.fn,\r\n      },\r\n    });\r\n  }\r\n}\r\n\r\nfunction redo() {\r\n  const lastCommand = redoArray.pop();\r\n  const currCell = document.querySelector(\".tabs__cell-active\");\r\n  const col = currCell.parentElement;\r\n  const tab = col.parentElement;\r\n\r\n  if (lastCommand) {\r\n    const fn = lastCommand.inverse.revFn;\r\n    saveCommand(fn, lastCommand.action.fn, false); //False to avoid reset the redo\r\n\r\n    if (undoArray.length > 0) {\r\n      undoArray[undoArray.length - 1].action.index = {\r\n        string: currCell.dataset.string,\r\n        col: col.dataset.col,\r\n        tab: tab.dataset.tab,\r\n      };\r\n    }\r\n\r\n    fn();\r\n    updateDataInfo();\r\n  }\r\n}\r\n\r\nfunction addLine() {\r\n  const currCell = document.querySelector(\".tabs__cell-active\");\r\n\r\n  deleteActiveCell();\r\n\r\n  const col = currCell.parentElement;\r\n  const tab = col.parentElement;\r\n  const newCol = document.createElement(\"div\");\r\n  newCol.classList.add(\"tabs__column\");\r\n  newCol.innerHTML = `\r\n    <span class=\"tabs__cell tabs__cell-active\">-</span>\r\n    <span class=\"tabs__cell\">-</span>\r\n    <span class=\"tabs__cell\">-</span>\r\n    <span class=\"tabs__cell\">-</span>\r\n    <span class=\"tabs__cell\">-</span>\r\n    <span class=\"tabs__cell\">-</span>\r\n  `;\r\n  tab.appendChild(newCol);\r\n}\r\n\r\nfunction deleteLine() {\r\n  const currCell = document.querySelector(\".tabs__cell-active\");\r\n  const col = currCell.parentElement;\r\n  const tab = col.parentElement;\r\n\r\n  tab.lastChild.remove();\r\n}\r\n\r\nfunction addBlankCol() {\r\n  const currCell = document.querySelector(\".tabs__cell-active\");\r\n\r\n  deleteActiveCell();\r\n\r\n  const col = currCell.parentElement;\r\n  const tab = col.parentElement;\r\n\r\n  const blankCol = document.createElement(\"div\");\r\n  const newCol = document.createElement(\"div\");\r\n\r\n  blankCol.classList.add(\"tabs__column\");\r\n  newCol.classList.add(\"tabs__column\");\r\n\r\n  blankCol.innerHTML = `\r\n    <span class=\"tabs__cell\">|</span>\r\n    <span class=\"tabs__cell\">|</span>\r\n    <span class=\"tabs__cell\">|</span>\r\n    <span class=\"tabs__cell\">|</span>\r\n    <span class=\"tabs__cell\">|</span>\r\n    <span class=\"tabs__cell\">|</span>\r\n  `;\r\n\r\n  newCol.innerHTML = `\r\n    <span class=\"tabs__cell tabs__cell-active\">-</span>\r\n    <span class=\"tabs__cell\">-</span>\r\n    <span class=\"tabs__cell\">-</span>\r\n    <span class=\"tabs__cell\">-</span>\r\n    <span class=\"tabs__cell\">-</span>\r\n    <span class=\"tabs__cell\">-</span>\r\n  `;\r\n\r\n  tab.appendChild(blankCol);\r\n  tab.appendChild(newCol);\r\n}\r\n\r\nfunction deleteBlankCol() {\r\n  const currCell = document.querySelector(\".tabs__cell-active\");\r\n  const col = currCell.parentElement;\r\n  const tab = col.parentElement;\r\n\r\n  tab.lastChild.remove();\r\n  tab.lastChild.remove();\r\n}\r\n\r\nfunction deleteActiveCell() {\r\n  const currCell = document.querySelector(\".tabs__cell-active\");\r\n  const col = currCell.parentElement;\r\n  const tab = col.parentElement;\r\n\r\n  console.log(undoArray[0]);\r\n\r\n  if (undoArray.length > 0) {\r\n    undoArray[undoArray.length - 1].action.index = {\r\n      string: currCell.dataset.string,\r\n      col: col.dataset.col,\r\n      tab: tab.dataset.tab,\r\n      //activated: \"del\",\r\n    };\r\n  }\r\n  currCell.classList.remove(\"tabs__cell-active\");\r\n}\r\n\r\nfunction addActiveCell({ string, col, tab }) {\r\n  const currTab = document.querySelector(`div[data-tab='${tab}']`);\r\n  const currCol = currTab.querySelector(`div[data-col='${col}']`);\r\n  const currString = currCol.querySelector(`span[data-string='${string}']`);\r\n\r\n  currString.classList.add(\"tabs__cell-active\");\r\n}\r\n"]}